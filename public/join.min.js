"use strict";function localize_cn(){$(".join_documentary .video_yt iframe").attr({src:"//embed.nicovideo.jp/watch/sm33778735"})}function apply_signin_redirect(){location.assign("//hearty.me/?r="+location.href.split("#")[0].replace("?","？").replace(/&/g,"＆").replace(location.origin,"")+"#apply")}function application_toggle(e){var i=$(".join_apply"),n=$("body");e?(i.fadeIn(),n.addClass("unscrollable"),$(".application_wrapper").scrollTop(0)):(i.slideUp("fast"),n.removeClass("unscrollable"))}function apply(){if(examine()){var e=$(".join_apply"),i=e.find("input[name='email']"),n=e.find("input[name='phone']"),a=e.find("textarea[name='idea']"),t=e.find(".submit .join_btn"),o=encodeURIComponent($("form").serialize().replace(/'/g,""));if(i.val().length<6||!/@/.test(i.val()))return notice(!0,"Email 格式不正確"),i.focus(),shake(i),!1;if(n.val().length<10||"09"!==n.val().substr(0,2))return notice(!0,"手機格式不符合"),n.focus(),shake(n),!1;if(a.val().length<20)return notice(!0,"報名原因多填一些，讓我們進一步了解你"),a.focus(),shake(a),!1;alertify.set({labels:{ok:"<i class='fas fa-inbox-out'></i> 確認送出",cancel:"取消"},buttonReverse:!1}),alertify.confirm("<i class='far fa-mailbox'></i> 確定送出報名表嗎？",function(i){i&&($("body").addClass("page-loading"),t.addClass("disabled").attr("onclick",""),$.ajax({url:location.href,type:"post",crossDomain:!0,dataType:"json",data:{action:"join",data:o},async:!0,xhrFields:{withCredentials:!0}}).then(function(i){switch($("body").removeClass("page-loading"),i){case 1:e.find(".tb, .remark").fadeOut(),notice(!1),e.find(".submitted").slideDown();break;default:notice(!0,"發生異常，請稍候重試"),t.attr({onclick:"apply()"}).removeClass("disabled"),shake(e.find(".tb")),msg("糟了，請稍候重試\n"+i)}fb_event_push(!1,"Lead")}).fail(function(i){notice(!0,"發生異常，請稍候重試"),t.attr({onclick:"apply()"}).removeClass("disabled"),shake(e.find(".tb")),msg("糟了，請稍候重試\n"+i)}))})}}function examine(){var e=$(".join_apply"),i=!0;if(e.find("input[type='text'][required]").each(function(){if($(this).val().length<1)return notice(!0,"「"+$(this).attr("title")+"」尚未填寫"),$(this).focus(),shake($(this)),i=!1}),i&&(e.find("input[type='url'][required]").each(function(){if($(this).val().length<10)return notice(!0,"「"+$(this).attr("title")+"」尚未填寫"),$(this).select(),shake($(this)),i=!1}),i))return i}function notice(e,i){var n=$(".notice");e?n.text(i).fadeIn("fast"):n.fadeOut()}$(function(){post_font(),$(".user, .join_apply .person").on("click",function(){hj_href("?r=/account#signin")}),img_cdn_fallback(),hj_localize_cn(),hj_ip_cn(localize_cn)}),leave_InAppBrowser(),$(window).scroll(function(){$(this).scrollTop()>200?$(".gotop").fadeIn():$(".gotop").fadeOut()});
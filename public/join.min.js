"use strict";function localize_cn(){$("[href][data-cn]").each(function(){$(this).attr("href",$(this).attr("data-cn"))}),$(".join_documentary .video_yt iframe").attr("src","//embed.nicovideo.jp/watch/sm33778735")}function apply_signin_redirect(){location.assign("//hearty.me/?r="+location.href.split("#")[0].replace("?","？").replace(/&/g,"＆").replace(location.origin,"")+"#apply")}function application_toggle(n){var e=$(".join_apply"),t=$("body");n?(e.fadeIn(),t.addClass("unscrollable"),$(".application_wrapper").scrollTop(0)):(e.slideUp("fast"),t.removeClass("unscrollable"))}function apply(){if(examine()){var n=$(".join_apply"),e=n.find("input[name='email']"),t=n.find("input[name='phone']"),i=n.find("textarea[name='idea']"),a=n.find(".submit .join_btn");if(e.val().length<6||!/@/.test(e.val()))return notice(!0,"Email 格式不正確"),e.focus(),shake(e),!1;if(t.val().length<10||"09"!==t.val().substr(0,2))return notice(!0,"手機格式不符合"),t.focus(),shake(t),!1;if(i.val().length<20)return notice(!0,"報名原因麻煩多填一些，讓我們進一步了解你"),i.focus(),shake(i),!1;alertify.set({labels:{ok:"<i class='fas fa-inbox-out'></i> 送出",cancel:"取消"},buttonReverse:!1}),alertify.confirm("<i class='far fa-mailbox'></i> 確認送出報名表嗎？",function(e){e&&($("body").addClass("page-loading"),a.addClass("disabled").attr("onclick",""),$.post(location.href,{action:"join",data:encodeURIComponent($("form").serialize().replace(/'/g,""))},function(e){switch($("body").removeClass("page-loading"),e){case"1":n.find(".tb, .remark").fadeOut(),notice(!1),n.find(".submitted").slideDown();break;default:notice(!0,"目前發生錯誤，請稍候重試"),a.attr("onclick","apply()").removeClass("disabled"),shake(n.find(".tb")),msg("目前發生錯誤，請稍候重試\n"+raw)}}))})}}function examine(){var n=$(".join_apply"),e=!0;if(n.find("input[type='text'][required]").each(function(n,t){if($(this).val().length<1)return notice(!0,"「"+$(this).attr("title")+"」尚未填寫"),$(this).focus(),shake($(this)),e=!1}),e&&(n.find("input[type='url'][required]").each(function(){if($(this).val().length<10)return notice(!0,"「"+$(this).attr("title")+"」尚未填寫"),$(this).select(),shake($(this)),e=!1}),e))return e}function notice(n,e){var t=$(".notice");n?t.text(e).fadeIn("fast"):t.fadeOut()}$(function(){$(".user, .join_apply .person").on("click",function(){open_url("../?r=/account")}),img_cdn_fallback(),hj_localize_cn(),"UserInfo"in window&&"getInfo"in window.UserInfo&&window.UserInfo.getInfo(function(n){"CN"==n.country.code&&localize_cn()})}),$(window).scroll(function(){$(this).scrollTop()>200?$(".gotop").fadeIn():$(".gotop").fadeOut()});
"use strict";var _h$=_h$||{};_h$.i=_h$.i||{menu:"主選單",upload:"上傳相片",empty:["你還沒上傳任何照片唷","現在就在日記中加入一張吧"],viponly:"相片集為 VIP 專屬功能",learnmore:"進一步了解",add:"加入相片",gotop:"回到上面"};var btn_alias="img";function imagesLoadedAndLayout(n){var e=new Masonry(".img_wall",{itemSelector:".img_wall .img-loaded",columnWidth:24,gutter:20,percentPosition:!0,transitionDuration:"0.8s"});return new Promise(o=>{imagesLoaded(n).on("progress",(n,o)=>{o.img.parentNode.classList.add("img-loaded"),e.appended(o.img.parentNode),e.layout()}).on("done",()=>{e.once("layoutComplete",()=>{o()})})})}function img_carousel(n){n=n||3e4,$("html,body").stop().animate({scrollTop:$(".bouncingLoader").offset().top},n,function(){$(this).animate({scrollTop:0},n,function(){img_carousel(n)})})}function img_scrolltop(n){n=n||$("html,body"),check_browser("Safari")?n.stop().animate({scrollTop:0},450):n.stop().scrollTop(0)}function read_post(n){if((n=n||0)<1||"undefined"==typeof hj_username)hj_href("account");else{var e=hj_username+"/"+n;check_hjapp()?window.open(location.origin+"/"+e,"_blank"):hj_href(e)}}hj_getScript("//cdn.jsdelivr.net/combine/npm/@webcreate/infinite-ajax-scroll@3.0.0-beta.6/dist/infinite-ajax-scroll.min.js,npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js,npm/imagesloaded@4.1.4/imagesloaded.pkgd.min.js").then(function(){$(function(){var n=new InfiniteAjaxScroll(".img_wall",{item:".img_wall figure",next:".pager_next",pagination:".pager",bind:!1,spinner:{element:".bouncingLoader",delay:600}});n.on("append",function(n){let e=n.appendFn;n.appendFn=((n,o,i)=>new Promise(t=>{e(n,o,i),imagesLoadedAndLayout(n).then(t)}))}),n.on("appended",function(n){0==n.items.length&&$(".no_more").fadeIn()}),imagesLoadedAndLayout(".img_wall").then(function(){n.bind()}),$(".pager").hide().delay(1e3).queue(function(){$(".img .vip_only").length>0&&img_carousel(),$(this).dequeue()})})}),$(function(){$(".mh-head .left").on("click",function(){nav_toggle($(".menu"),!0)}),$(".nav_btn[data-gotop]").on("click",function(){img_scrolltop()}),$(".nav_btn[data-add],.img_empty").on("click",function(){hj_href("d?img=1")}),$(".vip_only").on("click",function(){hj_href("d?plans=1")}),$(document).on("click",".img_wall img[data-post_id]",function(){read_post(this.dataset.post_id)}),post_font()});
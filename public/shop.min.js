function bill(t){null==t||""==t?msg('<i class="fal fa-gift-card"></i>「VIP 試用版」為新用戶專享的小禮物<br>到期後，將自動降為基本版'):hj_href("shop/bill?o="+t)}function bill_share(){var t=location.href.replace(location.host,"hearty.app");0!=check_hjapp()?location.assign("//hearty.me/wv?s="+encodeURIComponent(t.replace(/(^\w+:|^)\/\//,""))):is_touch_device()&&"share"in navigator?navigator.share({title:document.title,url:t}).catch(function(t){}):(alertify.set({labels:{ok:"取消",cancel:'<i class="fas fa-copy"></i> 複製'},buttonReverse:!0}),alertify.prompt('<i class="fal fa-file-alt"></i> 分享網址/QRcode：<br><br><a class="qrcode"></a>',function(t){t||hj_copy($("#alertify .alertify-text"))},t),alertify_input_custom({type:"url",inputmode:"none",placeholder:t,onclick:"hj_copy($(this))"},{cursor:"copy"}),get_qrcode($("#alertify .qrcode"),t))}function bill_screenshot(t,e){$("body").addClass("hj loading"),t=t||$(".bill_payment"),hj_getScript_npm("html2canvas@1.3.2/dist/html2canvas.min.js",function(){window.html2canvas(t.get(0),{useCORS:!0,scale:window.devicePixelRatio,width:t.get(0).offsetWidth,height:t.get(0).offsetHeight}).then(function(t){$(".btn_screenshot_download").removeAttr("onclick").attr({target:"_blank",href:t.toDataURL("image/png"),download:"溫度日記訂單_"+e+".png",rel:"noopener"}).get(0).click(),$("body").removeClass("hj loading")})})}function hj_smallchat_toggle(t){var e=$("#Smallchat iframe"),n=e.length>0;return n&&(e.contents().find(t?".Launcher":".Messenger_close").click(),t&&e.contents().find(".Input_field").focus()),n}function sales_tracking(t,e,n){var a=pkg_info(e);if(!a)return!1;switch(t){case"purchase":t={g:"purchase",f:[!1,"Purchase"]};break;case"checkout":t={g:"begin_checkout",f:[!1,"InitiateCheckout"]};break;default:t={g:"remove_from_cart",f:[!0,"RemoveFromCart"]}}ga_event_push(t.g,{items:[{id:e,name:"溫度日記 VIP",variant:null==n?"":(n?"訂閱":"儲值")+"方案",quantity:a.quantity,price:a.unit}]}),fb_event_push(t.f[0],t.f[1],{content_type:"product",content_name:"溫度日記 VIP",contents:[{id:e,quantity:a.quantity}],value:a.subtotal,num_items:1,currency:"TWD"})}function pkg_info(t){var e={2:{unit:149,subtotal:447,quantity:3},3:{unit:109,subtotal:654,quantity:6},4:{unit:89,subtotal:1068,quantity:12},5:{unit:33,subtotal:99,quantity:3},6:{unit:99,subtotal:99,quantity:1}};return t in e&&e[t]}
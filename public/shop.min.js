"use strict";function bill(t){null==t||""==t?msg('<i class="fal fa-gift-card"></i>'+_h("o-plan-2")):hj_href("shop/bill?o="+t)}function bill_reload(){var t=new URL(location.href);t.searchParams.has("reload")||(hj_loading(!0),t.searchParams.set("reload",1),location.href=t)}function bill_share(){var t=location.href.replace(location.host,"hearty.app");/iOS|Android/i.test(check_hjapp())?location.assign("//hearty.me/wv?s="+encodeURIComponent(t.replace(/(^\w+:|^)\/\//,""))):is_touch_device()&&"share"in navigator?navigator.share({title:document.title,url:t}).catch(function(t){}):(alertify.set({labels:{ok:_h("o-back"),cancel:'<i class="fas fa-copy"></i> '+_h("o-url-1")},buttonReverse:!0}),alertify.prompt('<i class="fal fa-file-alt"></i> '+_h("o-url-0")+'<br><br><a class="qrcode"></a>',function(t){t||hj_copy($("#alertify .alertify-text"))},t),alertify_input_custom({type:"url",inputmode:"none",placeholder:t,onclick:"hj_copy($(this))"},{cursor:"copy"}),get_qrcode($("#alertify .qrcode"),t))}function bill_screenshot(t,e){hj_loading(!0),t=t||$(".bill_payment"),hj_getScript_npm("html2canvas@1.4.1/dist/html2canvas.min.js",function(){window.html2canvas(t.get(0),{useCORS:!0,scale:window.devicePixelRatio,width:t.get(0).offsetWidth,height:t.get(0).offsetHeight}).then(function(t){$(".btn_screenshot_download").removeAttr("onclick").attr({target:"_blank",href:t.toDataURL("image/png"),download:"Hearty-Journal_"+e+".png",rel:"noopener"}).get(0).click(),hj_loading(!1)})})}function sales_tracking(t,e,a){var n=pkg_info(e),i=(e>4?"Prepaid":"Monthly")+" Plan";if(!n)return!1;switch(t){case"purchase":if(!getUrlPara("pay"))return;affiliates_cps(e,a,n.subtotal),t={g:"purchase",f:"Purchase"};break;case"checkout":t={g:"begin_checkout",f:"InitiateCheckout"};break;default:t={g:"remove_from_cart",f:"RemoveFromCart"}}if(ga_evt_push(t.g,{items:[{item_id:e,item_name:"VIP Premium",item_variant:i,id:e,name:"VIP Premium",variant:i,quantity:n.quantity,price:n.unit}]}),fb_evt_push(t.f,{content_type:"product",content_name:"VIP Premium",contents:[{id:e,quantity:n.quantity}],value:n.subtotal,num_items:1,currency:"TWD"}),"undefined"!=typeof _lt)try{_lt("send","cv",{type:"Purchase",value:n.subtotal,currency:"TWD"},["91b6ece5-a435-4ac9-9119-d8973be6322e"])}catch(r){}}function pkg_info(t){var e={1:{unit:50,subtotal:600,quantity:12},2:{unit:149,subtotal:447,quantity:3},3:{unit:109,subtotal:654,quantity:6},4:{unit:89,subtotal:1068,quantity:12},5:{unit:33,subtotal:99,quantity:3},6:{unit:99,subtotal:99,quantity:1}};return t in e&&e[t]}function affiliates_cps(t,e,a){var n,i,r,o,c,s,l,u,f,h={2:"season",3:"semi-annual",4:"annual",5:"monthly"}[t]||"";if(h)try{n={step:h},e&&(n.order=e),parseInt(a)>0&&(n.orderTotal=a),i={whiteLabel:{id:8,siteId:2640,domain:"t.adotone.com"},conversion:!0,conversionData:n,locale:"en-US",mkt:!0},c="script",s="//cdn.adotone.com/javascripts/va.js",r=window,o=document,l=i,r.VARemoteLoadOptions=l,u=o.createElement(c),f=o.getElementsByTagName(c)[0],u.async=1,u.src=s,f.parentNode.insertBefore(u,f),console.log("Affiliates CPS: "+JSON.stringify(i))}catch(m){}}
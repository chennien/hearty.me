"use strict";top.location.hostname.split(".").splice(-2).join(".")!==self.location.hostname.split(".").splice(-2).join(".")&&(top.location.href=self.location.href);var _h$=_h$||{};function _h(t,e){if(t=(t||"").split("-"),window._h$&&t.length>1&&t[0]in _h$&&t[1]in _h$[t[0]]){let i=_h$[t[0]][t[1]][t[2]]||_h$[t[0]][t[1]]||"";if("object"==typeof e)for(let t in e)i=i.replace(t,e[t]);return i}return t="("+t.join(")(")+")",console.warn("_h$"+t+" is missing"),t}function _h_init(){"object"==typeof _h$&&$("body *,title").each(function(){let t=Object.assign({},$(this).get(0).dataset);for(var e in t)if("h"==e){let i=_h(t[e]);$(this).text(i).attr({title:i})}else if(e.startsWith("h_")){let i=_h(t[e]),n={};"title"!==(e=e.substr(2))&&(e="data-"+e),n[e]=i,$(this).is("input,textarea")&&(n.placeholder=i),$(this).attr(n)}})}function test_init(){cf_colo(),dns_check(),detect_features();var t=$(".features");t.find("[data-i='device']").text(navigator.userAgent||""),t.find("[data-i='touchpoints']").text("maxTouchPoints"in navigator&&navigator.maxTouchPoints?navigator.maxTouchPoints:""),$("<img>",{src:"data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="}).on("load",function(){t.find("[data-i='webp']").attr({"data-status":1})}),t.find("[data-i='mouse']").attr({"data-status":matchMedia("(pointer:fine)").matches?1:0}),navigator.connection&&"effectiveType"in navigator.connection&&$(".network [data-i='speed']").prepend((navigator.connection.effectiveType||"").toUpperCase()+" "),$("header [data-screenshot]").on("click",function(){screenshot($("section"))}),t.find("[data-i='ads'],[data-i='trackers']").on("click",function(){alert(_h("n-adb"))}),$("footer").on("click",function(){top.location.href="//hearty.me/help"}),$.ajax({type:"GET",dataType:"script",url:"//cdn.jsdelivr.net/gh/chennien/hearty.me@1.0.40/public/plugin.smallchat.min.js",cache:!0,scriptCharset:"utf-8"})}function cf_colo(){"fetch"in window&&fetch(location.origin+"/cdn-cgi/trace",{method:"GET",mode:"cors",cache:"no-cache"}).then(t=>t.text()).then(t=>{t=t.replace(/(\r\n|\n|\r)/gm,"");var e=$(".network[title='ip']"),i=t.split("ip=")[1].split("ts=")[0];ip_check(i),e.find("[data-i='ip']").text(i),e.find("[data-i='cf_colo']").text(t.split("colo=")[1].split("http=")[0]),"undefined"!=typeof gtag&&gtag("event","Run Test"),"undefined"!=typeof mixpanel&&mixpanel.track("Run Test"),"undefined"!=typeof fbq&&fbq("trackCustom","Run Test")}).catch(t=>{console.log("發生錯誤：",t)})}function ip_check(t){"fetch"in window&&fetch("//api.hearty.app/ip/"+t,{method:"GET",mode:"cors",cache:"no-cache"}).then(t=>t.json()).then(t=>{var e=$(".network[title='ip']");for(let i in t)"countryCode"!=i?e.find("[data-i='"+i+"']").text(t[i]):country_flag(t[i],e.find("[data-i='countryCode']"))}).catch(t=>{console.log("發生錯誤：",t)})}function dns_check(){if("fetch"in window){var t=(Math.floor(1e9*Math.random())+1).toString();if("sendBeacon"in navigator)for(let e=1;e<=10;e++)try{navigator.sendBeacon("//"+e+"."+t+".bash.ws")}catch(t){}fetch(location.href,{method:"POST",mode:"cors",cache:"no-cache",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({uri:t})}).then(t=>t.json()).then(t=>{"error"in t?console.log("Error"):t.forEach(function(t){if("type"in t)switch(t.type){case"dns":var e=$("ul[title='"+t.type+"']");for(let i in t)"country"!=i?("asn"==i&&(t[i]=t[i].replace(" "," | ")),e.find("[data-i='"+i+"']").text(t[i])):country_flag(t[i],e.find("[data-i='country']"))}})}).catch(t=>{console.log("發生錯誤：",t)})}}function country_flag(t,e){return e.attr({src:"//i.hearty.app/w/flagcdn.com/32x24/"+(t||"tw").toLowerCase()+".png"}).on("error",function(){this.src.indexOf("i.hearty.app")>0&&(this.src=this.src.replace(".hearty.app/w","0.wp.com"))})}function detect_features(){var t=$("ul.features");Promise.all([{i:"ads",u:"pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"},{i:"trackers",u:"www.google-analytics.com/analytics.js"},{i:"jsdelivr",u:"cdn.jsdelivr.net/gh/chennien/hearty.me@1.0.40/public/editor.min.js"},{i:"images",u:"i.hearty.app/i/1x1.png"},{i:"firebase",u:"www.gstatic.com/firebasejs/8.6.2/firebase.js"},{i:"picsee",u:"go.hearty.me/tools.php"}].map(function(e){try{fetch("//"+e.u,{method:"HEAD",mode:"no-cors",cache:"no-cache"}).then(function(){t.find("li[data-i='"+e.i+"']").attr({"data-status":1})}).catch(function(){t.find("li[data-i='"+e.i+"']").attr({"data-status":0})})}catch(i){t.find("li[data-i='"+e.i+"']").attr({"data-status":0})}}))}function screenshot(t){var e=$("body");return e.addClass("loading"),$.ajax({type:"GET",dataType:"script",url:"//cdn.jsdelivr.net/npm/html2canvas@1.0.0-rc.7/dist/html2canvas.min.js",cache:!0,scriptCharset:"utf-8",success:function(){window.html2canvas(t.get(0),{useCORS:!0,scale:window.devicePixelRatio,width:t.get(0).offsetWidth,height:t.get(0).offsetHeight+25}).then(t=>{$("<a>",{target:"_blank",href:t.toDataURL("image/png"),download:_h("n-file")+"_"+(new Date).toISOString().split("T")[0].replace(/-/g,"")+".png",rel:"noopener"}).get(0).click(),e.removeClass("loading")})}})}_h$.n=_h$.n||{file:"溫度日記連線檢測",adb:"提醒您：若攔截外掛的規則設定太嚴苛，將可能誤判及屏蔽正常程式，導致網頁故障",title:["網路連線檢測","溫度日記 網路連線檢測"],back:"返回",shot:"截圖",id:"溫度 ID",features:"功能",fn:["可載入核心程式","可連線到圖片空間","轉址服務可用","推播通知可用","Adblock 廣告攔截外掛","Adblock 屏蔽網頁分析","支援觸控","WebP 圖片格式","使用滑鼠","裝置資訊"],net:["我的 IP","最近的伺服器位置","電信商","網路提供","城市","地區","國家","網速"],support:"連絡客服：請提供溫度 ID 及本頁截圖，以加快為您服務"},$(function(){test_init(),_h_init()});
"use strict";$.ajaxSetup({scriptCharset:"utf-8",cache:!0});function update(data){if(window.navigator.onLine){var r=$.ajax({url:"//"+window.location.hostname+"/sync",type:"POST",crossDomain:!0,dataType:"json",data:data,async:!1,success:function(raw){return $(raw)["selector"]},error:function(jqXHR,textStatus,errorThrown){}});return r.status>=200&&r.status<300||r.status===304?JSON.parse(r.responseText):!1}
else{return!1}}
function hj_getScript(url,callback){return $.ajax({type:"GET",dataType:"script",url:url,success:callback||{},cache:!0,scriptCharset:"utf-8"})}
function serverReachable(){if(window.navigator.onLine){var s=$.ajax({type:"HEAD",url:"//"+window.location.hostname+"/sync?"+(new Date().getTime()).toString(16),async:!1}).status;return s>=200&&s<300||s===304}
else{return!1}}
function hj__include(type,url){if(type=="js"){var i=document.createElement("script");i.src=url}
else{var i=document.createElement("link");i.rel="stylesheet";i.href=url}(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(i)}
function cssFeatureSupported(prop,value){if("CSS" in window){return window.CSS.supports(prop,value)}
else{var d=document.createElement("div");d.style[prop]=value;return d.style[prop]===value}}
function getUrlPara(para){var reg=new RegExp("(^|&)"+para+"=([^&]*)(&|$)");var r=window.location.search.substr(1).match(reg);if(r!=null)return decodeURIComponent(r[2]);return null}
function getcookie(cname){var name=cname+'=',ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i].trim();if(c.indexOf(name)===0)return c.substring(name.length,c.length)}
return""}
function setcookie(cname,value,months_added){var exp=new Date();exp.setMonth(exp.getMonth()+(months_added||3));document.cookie=cname+'='+value+';expires='+exp+';domain=.'+document.domain+';path=/'}
function hj_alert(t){alert(t)}
function msg(msg,button){alertify.set({labels:{ok:button||"知道了"}});alertify.alert(msg||"目前發生錯誤，請稍後再試。")}
function press_enter(e,action){if((e.keyCode?e.keyCode:e.which)==13){if(action.indexOf("(")>0)eval(action);else eval(action+'();')}}
function timestamping(){return!Date.now?new Date().getTime():Date.now()/1000|0}
function dynamic_function(fn){this[fn].apply(null,Array.prototype.slice.call(arguments,1))}
function htmlspecialchars(str){return!!str?str.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&apos;'):""}
function shake($e){var l=20;for(var i=0;i<8;i++)
$e.animate({'margin-left':"+="+(l=-l)+'px','margin-right':"-="+l+'px'},50);if(navigator.vibrate)navigator.vibrate([800])}
function signout(){alertify.set({labels:{ok:"否",cancel:"登出 🔑"},buttonReverse:!1});alertify.confirm("確定要登出嗎？",function(e){if(!e){ga_event_push("Archive",{"event_category":"Posts","event_label":"Signout"});window.sessionStorage.clear();window.location.assign("//hearty.me/signout")}})}
function user_country(){var c=getcookie("hearty_user_country");if(!!c){return decodeURIComponent(c)||""}
else{$.getScript("//cdn.jsdelivr.net/gh/vdurmont/userinfo-js@84277391efd5d08f58fdf9c3ad75bc88263c5c49/dist/userinfo.min.js",function(){if("UserInfo" in window&&"getInfo" in window.UserInfo)
window.UserInfo.getInfo(function(d){var e=new Date();e.setTime(e.getTime()+8.64e7);document.cookie="hearty_user_country="+d.country.code+";expires="+e+";domain=."+document.domain+";path=/";return d.country.code})})}}
function hj_mixpanel(e,p){if(typeof window.mixpanel!=="undefined"){if(p==null)window.mixpanel.track(e);else window.mixpanel.track(e,p)}}
function ga_event_push(v0,v1){if(typeof window.gtag!=="undefined")window.gtag("event",v0,v1)}
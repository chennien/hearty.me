"use strict";function hj_update(e){return $.ajax({url:window.location.origin+"/update",type:"post",crossDomain:!0,dataType:"json",data:e,async:!0})}function update(e){if(window.navigator.onLine){console.warn("* fn update: "+JSON.stringify(e));var n=$.ajax({url:window.location.origin+"/update",type:"post",crossDomain:!0,dataType:"json",data:e,async:!1,success:function(e){return $(e).selector}});return(n.status>=200&&n.status<300||304===n.status)&&JSON.parse(n.responseText)}return!1}function is_touch_device(){return!((navigator.userAgent||"").indexOf("Edge/")>0)&&("ontouchstart"in window||"maxTouchPoints"in navigator&&navigator.maxTouchPoints>0)}function check_OS(e){var n=navigator.userAgent||"",t=/iPhone|iPad|iPod/i.test(n)?["iOS"]:n.match(/Windows|Macintosh|Android|iPad|iPhone|iPod/gi);return t=t.length>0?t[0]:"",null==e?t:e==t}function check_browser(e){var n=navigator.userAgent||"",t=/^((?!chrome|android).)*safari/i.test(n)?["Safari"]:n.match(/YaBrowser|UCBrowser|QQBrowser|BIDUBrowser|LBBROWSER|MetaSr|Maxthon|Edge|Opera Mini|OPR|Firefox|Chrome|MSIE/gi);return t=t.length>0?t[0]:"",null==e?t:e==t}function hj_getScript(e,n){return $.ajax({type:"GET",dataType:"script",url:e,success:n||{},cache:!0,scriptCharset:"utf-8"})}function serverReachable(){if(window.navigator.onLine){var e=$.ajax({type:"HEAD",url:window.location.origin+"/update?"+(new Date).getTime().toString(16),async:!1}).status;return e>=200&&e<300||304===e}return!1}function hj__include(e,n){var t;"js"==e?(t=document.createElement("script")).src=n:((t=document.createElement("link")).rel="stylesheet",t.href=n);(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(t)}function cssFeatureSupported(e,n){if("CSS"in window)return window.CSS.supports(e,n);var t=document.createElement("div");return t.style[e]=n,t.style[e]===n}function getUrlPara(e){var n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),t=window.location.search.substr(1).match(n);return null!=t?decodeURIComponent(t[2]):null}function getcookie(e){for(var n=e+"=",t=document.cookie.split(";"),o=0;o<t.length;o++){var i=t[o].trim();if(0===i.indexOf(n))return i.substring(n.length,i.length)}return""}function setcookie(e,n,t){var o=new Date;o.setMonth(o.getMonth()+(t||3)),document.cookie=e+"="+n+";expires="+o+";domain=."+document.domain+";path=/"}function hj_alert(e){alert(e)}function msg(e,n){alertify.set({labels:{ok:n||"知道了"}}),alertify.alert(e||"目前發生錯誤，請稍後再試。")}function press_enter(e,action){13==(e.keyCode?e.keyCode:e.which)&&(action.indexOf("(")>0?eval(action):eval(action+"();"))}function timestamping(){return Date.now?Date.now()/1e3|0:(new Date).getTime()}function dynamic_function(e){this[e].apply(null,Array.prototype.slice.call(arguments,1))}function htmlspecialchars(e){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):""}function shake(e){for(var n=20,t=0;t<8;t++)e.animate({"margin-left":"+="+(n=-n)+"px","margin-right":"-="+n+"px"},50);navigator.vibrate&&navigator.vibrate([800])}function signout(e){null==e?(alertify.set({labels:{ok:"否",cancel:"登出 🔑"},buttonReverse:!1}),alertify.confirm("確定要登出嗎？",function(e){e||(ga_event_push("Sign Out",{event_category:"Auth",event_label:"Sign Out"}),window.sessionStorage.clear(),setcookie("hearty_screenlock","",1),window.location.assign("//hearty.me/signout"))})):(window.sessionStorage.clear(),setcookie("hearty_screenlock","",1),window.location.assign("//hearty.me/signout"))}function numberWithCommas(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function user_country(){var e=getcookie("hearty_user_country");if(e)return decodeURIComponent(e)||"";$.getScript("//cdn.jsdelivr.net/gh/vdurmont/userinfo-js@84277391efd5d08f58fdf9c3ad75bc88263c5c49/dist/userinfo.min.js",function(){"UserInfo"in window&&"getInfo"in window.UserInfo&&window.UserInfo.getInfo(function(e){var n=new Date;return n.setTime(n.getTime()+864e5),document.cookie="hearty_user_country="+e.country.code+";expires="+n+";domain=."+document.domain+";path=/",e.country.code})})}function hj_mixpanel(e,n){void 0!==window.mixpanel&&(null==n?window.mixpanel.track(e):window.mixpanel.track(e,n))}function ga_event_push(e,n){void 0!==window.gtag&&window.gtag("event",e,n)}$.ajaxSetup({scriptCharset:"utf-8",cache:!0});
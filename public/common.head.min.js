"use strict";function hj_update(e){return $.ajax({url:window.location.origin+"/update",type:"post",crossDomain:!0,dataType:"json",data:e,async:!0})}function update(e){if(window.navigator.onLine){var t=$.ajax({url:window.location.origin+"/update",type:"post",crossDomain:!0,dataType:"json",data:e,async:!1,success:function(e){return $(e).selector}});return(t.status>=200&&t.status<300||304===t.status)&&JSON.parse(t.responseText)}return!1}function is_touch_device(){return!((navigator.userAgent||"").indexOf("Edge/")>0)&&("ontouchstart"in window||"maxTouchPoints"in navigator&&navigator.maxTouchPoints>0)}function hj_getScript(e,t){return $.ajax({type:"GET",dataType:"script",url:e,success:t||{},cache:!0,scriptCharset:"utf-8"})}function serverReachable(){if(window.navigator.onLine){var e=$.ajax({type:"HEAD",url:window.location.origin+"/update?"+(new Date).getTime().toString(16),async:!1}).status;return e>=200&&e<300||304===e}return!1}function hj__include(e,t){var n;"js"==e?(n=document.createElement("script")).src=t:((n=document.createElement("link")).rel="stylesheet",n.href=t);(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(n)}function cssFeatureSupported(e,t){if("CSS"in window)return window.CSS.supports(e,t);var n=document.createElement("div");return n.style[e]=t,n.style[e]===t}function getUrlPara(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return null!=n?decodeURIComponent(n[2]):null}function getcookie(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){var a=n[o].trim();if(0===a.indexOf(t))return a.substring(t.length,a.length)}return""}function setcookie(e,t,n){var o=new Date;o.setMonth(o.getMonth()+(n||3)),document.cookie=e+"="+t+";expires="+o+";domain=."+document.domain+";path=/"}function hj_alert(e){alert(e)}function msg(e,t){alertify.set({labels:{ok:t||"知道了"}}),alertify.alert(e||"目前發生錯誤，請稍後再試。")}function press_enter(e,action){13==(e.keyCode?e.keyCode:e.which)&&(action.indexOf("(")>0?eval(action):eval(action+"();"))}function timestamping(){return Date.now?Date.now()/1e3|0:(new Date).getTime()}function dynamic_function(e){this[e].apply(null,Array.prototype.slice.call(arguments,1))}function htmlspecialchars(e){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):""}function shake(e){for(var t=20,n=0;n<8;n++)e.animate({"margin-left":"+="+(t=-t)+"px","margin-right":"-="+t+"px"},50);navigator.vibrate&&navigator.vibrate([800])}function signout(e){null==e?(alertify.set({labels:{ok:"否",cancel:"登出 🔑"},buttonReverse:!1}),alertify.confirm("確定要登出嗎？",function(e){e||(ga_event_push("Sign Out",{event_category:"Auth",event_label:"Sign Out"}),window.sessionStorage.clear(),setcookie("hearty_screenlock","",1),window.location.assign("//hearty.me/signout"))})):(window.sessionStorage.clear(),setcookie("hearty_screenlock","",1),window.location.assign("//hearty.me/signout"))}function numberWithCommas(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function user_country(){var e=getcookie("hearty_user_country");if(e)return decodeURIComponent(e)||"";$.getScript("//cdn.jsdelivr.net/gh/vdurmont/userinfo-js@84277391efd5d08f58fdf9c3ad75bc88263c5c49/dist/userinfo.min.js",function(){"UserInfo"in window&&"getInfo"in window.UserInfo&&window.UserInfo.getInfo(function(e){var t=new Date;return t.setTime(t.getTime()+864e5),document.cookie="hearty_user_country="+e.country.code+";expires="+t+";domain=."+document.domain+";path=/",e.country.code})})}function hj_mixpanel(e,t){void 0!==window.mixpanel&&(null==t?window.mixpanel.track(e):window.mixpanel.track(e,t))}function ga_event_push(e,t){void 0!==window.gtag&&window.gtag("event",e,t)}$.ajaxSetup({scriptCharset:"utf-8",cache:!0});
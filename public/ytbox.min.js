"use strict";var yt_player;function onYouTubeIframeAPIReady(){yt_player=new YT.Player("yt_player",{host:"https://www.youtube-nocookie.com",videoId:"vYFnZdUiUyg",events:{onReady:function(t){t.target.setVolume(50),yt_player.current_video=0},onStateChange:function(t){if(t.data==YT.PlayerState.ENDED){var e=$(".ytbox .yt_list");yt_player.current_video<e.find("li[data-yt]").length-1?yt_player.current_video++:(yt_player.current_video=0,e.scrollTop(0)),ytbox_play()}}}})}function ytbox_play(){var t=$(".ytbox .yt_list li[data-yt]"),e=t.eq(yt_player.current_video),a=e.attr("data-yt");"loadVideoById"in yt_player&&yt_player.loadVideoById({videoId:a,suggestedQuality:"large"}),t.removeAttr("data-playing"),e.attr("data-playing","")}function ytbox_toggle(t,e){null==$(".ytbox").data("init")&&(e=e||"vYFnZdUiUyg",$("<iframe>",{id:"yt_player",src:"//www.youtube-nocookie.com/embed/"+e+"?"+$.param({enablejsapi:1,controls:1,fs:1,modestbranding:1,cc_load_policy:1,rel:0,autoplay:0,playsinline:1}),allow:"autoplay;encrypted-media;picture-in-picture",allowfullscreen:""}).appendTo(".yt_player>div:first-child"),hj_video("load_player_api"),ytbox_query(),$(".ytbox .yt_list ol").sortable({items:"> li",axis:"y",cursor:"row-resize",scroll:!0,handle:".arr",placeholder:"dragging",start:function(){$(this).children("li").attr("data-opacity","")},stop:function(){$(this).children("li").removeAttr("data-opacity")},update:function(){ytbox_sorting()},change:function(){$("li.dragging").css({margin:0}).delay(10).queue(function(){$(this).css({margin:"10px auto"}).dequeue()})}}).disableSelection(),$(".ytbox").data("init",1)),popup_toggle(t,"ytbox"),t&&saved(!1);var a=t?"Open":"Close";hj_mixpanel("YTbox "+a),ga_event_push("YTbox "+a,{event_category:"YTbox "+a,event_label:"YTbox "+a})}function ytbox_sorting(){var t=$(".ytbox .yt_list li[data-yt]").map(function(){return Number($(this).attr("data-play_id"))}).toArray();t.length>1&&hj_update({action:"ytbox_sorting",videos:JSON.stringify(t)}).then(function(t){switch(t.Status){case 1:hj_mixpanel("Video Sorting"),ga_event_push("Video Sorting",{event_category:"YTbox",event_label:"Video Sorting"});break;case 2:signin_required()}})}function ytbox_add(e){var a=$(".ytbox .yt_list ol"),i=["yvbftoh7llc","nQWFzMvCfLE","FYjxHPtKihw","C9ujBoud26k","bVjedGudN8w","_r3aag869Tg","5IlVfkY5q54","RZnKC3aQ0rc"];e=e||i[Math.floor(Math.random()*i.length)],alertify.set({labels:{ok:'<i class="fas fa-plus"></i> '+_h("e-video-3"),cancel:_h("e-no-1")},buttonReverse:!1}),alertify.prompt('<i class="fab fa-youtube"></i> '+_h("e-video-0")+'<br>(<a onclick="hj_video(\'upload\')"><i class="far fa-upload"></i> '+_h("e-video-1")+"</a>)",function(e,i){if(e)if(i=YoutubeURLparser(i)){var o=hj_video("get_title",i);if(!o)return void(hj_lang_zhcn()?ytbox_cn():(alertify.set({labels:{ok:_h("e-video-7")+' <i class="fas fa-external-link-alt"></i>',cancel:_h("e-ok-1")},buttonReverse:!0}),alertify.confirm('<i class="fal fa-video-slash"></i> '+_h("e-video-6"),function(t){t&&open_url("//www.youtube.com/watch?v="+i),ytbox_add(""),alertify_input_shake()})));o=capitalizeFirstLetter(o)||_h("e-video-4"),hj_update({action:"ytbox_add",video:i,title:o,order:a.children("li[data-yt]").length}).then(function(e){switch(e.Status){case 1:a.append(ytbox_btns_binding(ytbox_create({play_id:e.Values.play_id,title:o,youtube:i}))),$(".ytbox .yt_list").scrollTop(a.height()),alertify.success('<i class="far fa-play"></i> '+(null==t?_h("e-video-4"):"「"+t+"」")),hj_mixpanel("Video Added",{post_id:"ytbox",youtube:i}),ga_event_push("Video Added",{event_category:"YTbox",event_label:"Video_Added"});break;case 2:signin_required();break;default:msg()}})}else msg('<i class="fal fa-video-slash"></i> '+_h("e-video-5"),_h("e-ok-0"),function(){ytbox_add(""),alertify_input_shake()})},"https://youtu.be/"+e),alertify_input_custom({type:"url",placeholder:_h("e-video-11"),onfocus:"select_input_text($(this))",oninput:"if(!!YoutubeURLparser(this.value))$('.alertify-button-ok').click()"}),ytbox_delete_btns(!1)}function ytbox_detach(t){var e=$(".ytbox .yt_list li[data-play_id='"+t+"']"),a=e.attr("title");alertify.set({labels:{ok:"e-no-0",cancel:'<i class="fas fa-trash-alt"></i> '+_h("e-video-9")},buttonReverse:!1}),alertify.confirm('<i class="fal fa-exclamation-triangle"></i> '+_h("e-video-8",{$title:a}),function(a){a||hj_update({action:"ytbox_detach",play_id:t}).then(function(t){switch(t.Status){case 1:e.slideUp("fast",function(){$(this).remove()}),hj_vibrate(30),hj_mixpanel("Video Detach"),ga_event_push("Video Detach",{event_category:"YTbox",event_label:"Video Detach"});break;case 2:signin_required()}ytbox_delete_btns()})})}function ytbox_query(){hj_update({action:"ytbox_query"}).then(function(t){switch(t.Status){case 1:var e=[],a=$(".ytbox .yt_list ol");t.Values.videos.forEach(function(t,a){e.push(ytbox_btns_binding(ytbox_create({play_id:t.play_id,title:t.title,youtube:t.youtube})))}),a.html(e).attr("data-empty",_h("e-yt-4"));break;case 2:signin_required()}})}function ytbox_create(t){return $("<li>",{title:t.title,"data-play_id":t.play_id,"data-yt":t.youtube,html:$("<span>",{class:"arr",title:_h("e-yt-1")}).add($("<span>",{"data-delete":"",title:_h("e-yt-2")}))})}function ytbox_delete_btns(t){var e=$(".ytbox .yt_list li [data-delete]");null==t?e.toggle():t?e.fadeIn():e.fadeOut()}function ytbox_btns_binding(t){return t.on("click",function(){window.yt_player&&"current_video"in yt_player?(yt_player.current_video=$(this).index(),ytbox_play()):hj_lang_zhcn()&&ytbox_cn()}).find("[data-delete]").on("click",function(e){e.stopPropagation(),ytbox_detach(t.attr("data-play_id"))}),t}function ytbox_intro(){msg('<i class="fas fa-music"></i> '+_h("e-yt-5"))}function ytbox_cn(){msg('<i class="far fa-exclamation-circle"></i> 如位于中国，需翻牆才能观看油管视频'," Σヽ(ﾟД ﾟ; )ﾉ ")}function ytbox_lightoff(){$(".mask").length||$("body").append($("<div>",{class:"mask"}).on("click",function(){$(this).hide()})),$(".mask").show()}
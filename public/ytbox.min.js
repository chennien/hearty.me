"use strict";var yt_player;function onYouTubeIframeAPIReady(){yt_player=new YT.Player("yt_player",{host:"https://www.youtube-nocookie.com",videoId:"vYFnZdUiUyg",events:{onReady:function(a){a.target.setVolume(50),yt_player.current_video=0},onStateChange:function(b){if(b.data==YT.PlayerState.ENDED){var a=$(".yt_list");yt_player.current_video<a.find("li[data-yt]").length-1?yt_player.current_video++:(yt_player.current_video=0,a.scrollTop(0)),ytbox_play()}}}})}function ytbox_play(){var a=$(".yt_list li[data-yt]"),b=a.eq(yt_player.current_video),c=b.attr("data-yt");"loadVideoById"in yt_player&&yt_player.loadVideoById({videoId:c,suggestedQuality:"large"}),a.removeAttr("data-playing"),b.attr("data-playing","")}function ytbox_toggle(b,c){null==$(".ytbox").data("init")&&($("<iframe>",{id:"yt_player",src:"//www.youtube-nocookie.com/embed/"+(c=c||"vYFnZdUiUyg")+"?"+$.param({enablejsapi:1,controls:1,fs:1,modestbranding:1,cc_load_policy:1,rel:0,autoplay:0,playsinline:1}),allow:"autoplay;encrypted-media;picture-in-picture",allowfullscreen:""}).appendTo(".yt_player>div:first-child"),hj_video("load_player_api"),ytbox_query(),$(".yt_list ol").sortable({items:"> li",axis:"y",cursor:"row-resize",scroll:!0,handle:".arr",placeholder:"dragging",start:function(){$(this).children("li").attr("data-opacity","")},stop:function(){$(this).children("li").removeAttr("data-opacity")},update:function(){ytbox_sorting()},change:function(){$("li.dragging").css({margin:0}).delay(10).queue(function(){$(this).css({margin:"10px auto"}).dequeue()})}}).disableSelection(),$(".ytbox").data("init",1)),popup_toggle(b,"ytbox"),b&&saved(!1);var a=b?"Open":"Close";hj_mixpanel("YTbox "+a),ga_event_push("YTbox "+a,{event_category:"YTbox "+a,event_label:"YTbox "+a})}function ytbox_sorting(){var a=$(".yt_list li[data-yt]").map(function(){return Number($(this).attr("data-play_id"))}).toArray();a.length>1&&hj_update({action:"ytbox_sorting",videos:JSON.stringify(a)}).then(function(a){switch(a.Status){case 1:hj_mixpanel("Video Sorting"),ga_event_push("Video Sorting",{event_category:"YTbox",event_label:"Video Sorting"});break;case 2:signin_required()}})}function ytbox_add(a){var c=$(".yt_list"),d=c.find("ol"),b=["nQWFzMvCfLE","FYjxHPtKihw","C9ujBoud26k","bVjedGudN8w","5IlVfkY5q54","PfuW-IkgVAY"];a=a||b[Math.floor(Math.random()*b.length)],alertify.set({labels:{ok:'<i class="fas fa-plus"></i> '+_h("e-video-3"),cancel:_h("e-no-1")},buttonReverse:!1}),alertify.prompt('<i class="fab fa-youtube"></i> '+_h("e-video-0")+'<br>(<a onclick="hj_video(\'upload\')"><i class="far fa-upload"></i> '+_h("e-video-1")+"</a>)",function(e,a){if(e){if(a=YoutubeURLparser(a)){var b=hj_video("get_title",a);if(!b){hj_lang_zhcn()?ytbox_cn():(alertify.set({labels:{ok:_h("e-video-7")+' <i class="fas fa-external-link-alt"></i>',cancel:_h("e-ok-1")},buttonReverse:!0}),alertify.confirm('<i class="fal fa-video-slash"></i> '+_h("e-video-6"),function(b){b&&open_url("//www.youtube.com/watch?v="+a),ytbox_add(""),alertify_input_shake()}));return}b=capitalizeFirstLetter(b)||_h("e-video-4"),hj_update({action:"ytbox_add",video:a,title:b,order:d.children("li[data-yt]").length}).then(function(e){switch(e.Status){case 1:d.append(ytbox_btns_binding(ytbox_create({play_id:e.Values.play_id,title:b,youtube:a}))),c.scrollTop(c.get(0).scrollHeight),alertify.success('<i class="far fa-play"></i> '+(null==t?_h("e-video-4"):"\u300C"+t+"\u300D")),hj_mixpanel("Video Added",{post_id:"ytbox",youtube:a}),ga_event_push("Video Added",{event_category:"YTbox",event_label:"Video_Added"});break;case 2:signin_required();break;default:msg()}})}else msg('<i class="fal fa-video-slash"></i> '+_h("e-video-5"),_h("e-ok-0"),function(){ytbox_add(""),alertify_input_shake()})}},"https://youtu.be/"+a),alertify_input_custom({type:"url",placeholder:_h("e-video-11"),onfocus:"select_input_text($(this))",oninput:"if(!!YoutubeURLparser(this.value))$('.alertify-button-ok').click()"}),ytbox_delete_btns(!1)}function ytbox_detach(a){var b=$(".yt_list li[data-play_id='"+a+"']"),c=b.attr("title");alertify.set({labels:{ok:_h("e-no-0"),cancel:'<i class="fas fa-trash-alt"></i> '+_h("e-video-9")},buttonReverse:!1}),alertify.confirm('<i class="fal fa-exclamation-triangle"></i> '+_h("e-video-8",{$title:c}),function(c){c||hj_update({action:"ytbox_detach",play_id:a}).then(function(a){switch(a.Status){case 1:b.slideUp("fast",function(){$(this).remove()}),hj_vibrate(30),hj_mixpanel("Video Detach"),ga_event_push("Video Detach",{event_category:"YTbox",event_label:"Video Detach"});break;case 2:signin_required()}ytbox_delete_btns()})})}function ytbox_query(){hj_update({action:"ytbox_query"}).then(function(a){switch(a.Status){case 1:var b=[],c=$(".yt_list ol");a.Values.videos.forEach(function(a,c){b.push(ytbox_btns_binding(ytbox_create({play_id:a.play_id,title:a.title,youtube:a.youtube})))}),c.html(b).attr("data-empty",_h("e-yt-4"));break;case 2:signin_required()}})}function ytbox_create(a){return $("<li>",{title:a.title,"data-play_id":a.play_id,"data-yt":a.youtube,html:$("<span>",{class:"arr",title:_h("e-yt-1")}).add($("<span>",{"data-delete":"",title:_h("e-yt-2")}))})}function ytbox_delete_btns(b){var a=$(".yt_list li [data-delete]");null==b?a.toggle():b?a.fadeIn():a.fadeOut()}function ytbox_btns_binding(a){return a.on("click",function(){window.yt_player&&"current_video"in yt_player?(yt_player.current_video=$(this).index(),ytbox_play()):hj_lang_zhcn()&&ytbox_cn()}).find("[data-delete]").on("click",function(b){b.stopPropagation(),ytbox_detach(a.attr("data-play_id"))}),a}function ytbox_intro(){msg('<i class="fas fa-music"></i> '+_h("e-yt-5"))}function ytbox_cn(){msg('<i class="far fa-exclamation-circle"></i> \u5982\u4F4D\u4E8E\u4E2D\u56FD\uFF0C\u9700\u7FFB\u7246\u624D\u80FD\u89C2\u770B\u6CB9\u7BA1\u89C6\u9891'," \u03A3\u30FD(\uFF9F\u0414 \uFF9F; )\uFF89 ")}function ytbox_lightoff(){$(".mask").length||$("<div>",{class:"mask"}).on("click",function(){$(this).hide()}).appendTo($("body")).get(0).addEventListener("touchmove",function(){$(this).hide()},{passive:!0}),$(".mask").show()}
"use strict";function bd_loading(t){var e=$("body");t?e.addClass("loading"):e.removeClass("loading")}function bd_update(t){return $.ajax({url:location.origin+"/bd/update.php",type:"post",crossDomain:!0,dataType:"json",data:t,async:!0,xhrFields:{withCredentials:!0}})}function get_vouchers(){bd_update({action:"get_vouchers"}).then(function(t){switch(t.Status){case 1:$(".vouchers tbody[data-empty] tr").remove(),list_vouchers(t.Values);break;default:msg()}}).fail(function(){msg()})}function list_vouchers(t){var e=$(".vouchers tbody").hide();t.forEach(function(t){var a=$("[data-sample] tr").clone().removeAttr("data-sample");if(a.find("[data-voucher]").attr({title:t.voucher}),a.find("[data-expiration]").attr({"data-expiration":t.expiration[0],title:t.expiration[1]}),"email"in t&&a.find("[data-email]").attr({title:t.email,"data-emails_sent":t.emails_sent}),"remark"in t&&a.find("[data-remark]").attr({title:t.remark}),"redemption"in t){var i=parseInt(t.expired)>0,n=parseInt(t.redemption)>0;a.find("[data-status]").attr({"data-status":n?2:+!i,title:n?"å·²å…Œæ›":i?"é€¾æœŸ":"æœ‰æ•ˆ"})}a.prependTo(e)}),e.fadeIn()}function voucher_remark(t){if(t){var e=t.siblings("[data-voucher]").attr("title")||"",a=t.attr("title")||"";alertify.set({labels:{ok:"<i class='fas fa-plus'></i> è²¼ä¸Š",cancel:"å–æ¶ˆ"},buttonReverse:!1}),alertify.prompt("<i class='fal fa-edit'></i> å‚™è¨»ä¸€ä¸‹ï¼š",function(a,i){a&&bd_update({action:"voucher_remark",voucher:e,remark:i=i||""}).then(function(e){1==e.Status&&t.attr({title:i})}).fail(function(){msg()})},a),alertify_input_custom({minlength:1,max:20,placeholder:"eg. é ˜å–è€…å§“åã€æª”æœŸåç¨±ã€å…¶ä»–è³‡è¨Š"},{"letter-spacing":"1px"})}}function create_vouchers(){alertify.set({labels:{ok:"<i class='fas fa-shopping-bag'></i> å–è™Ÿ",cancel:"å¦"},buttonReverse:!1}),alertify.prompt("<i class='fal fa-gift'></i> éœ€è¦å¹¾å¼µåºè™Ÿå‘¢ï¼Ÿ<br><small>åºè™Ÿéœ€æ–¼ 7æ—¥å…§å…Œæ›å®Œç•¢ï¼Œè«‹ç´¢å–æ‰€éœ€æ•¸é‡å³å¯</small>",function(t,e){t&&bd_update({action:"create_vouchers",num:e=Math.min(e||1,20)}).then(function(t){switch(t.Status){case 1:list_vouchers(t.Values);break;default:msg()}}).fail(function(){msg()})},"1"),alertify_input_custom({type:"number",min:1,max:20,step:1,maxlength:3,placeholder:10},{"letter-spacing":"3px"})}function hide_voucher(t){var e=t.siblings("[data-voucher]").attr("title")||"",a=1==t.siblings("[data-status]").attr("data-status");alertify.set({labels:{ok:"å¦",cancel:"<i class='fas fa-trash-alt'></i> åˆªæ‰å®ƒ"},buttonReverse:!1}),alertify.confirm("<i class='fal fa-exclamation-circle'></i> "+(a?"åºè™Ÿæœªè¢«å…Œæ›ï¼Œä¸å†éœ€è¦":"åˆªé™¤ç”¨éçš„")+"ã€Œ"+e+"ã€å—ï¼Ÿ",function(a){a||bd_update({action:"hide_voucher",voucher:e}).then(function(a){switch(a.Status){case 1:alertify.error("<i class='fas fa-trash-alt'></i> åˆªé™¤äº† "+e),t.parent().slideUp("slow",function(){$(this).remove()});break;default:msg()}}).fail(function(){msg()})})}function collect_email(t){if(t){var e=t.siblings("[data-voucher]").attr("title")||"",a=(t.attr("title")||"").toLowerCase(),i=t.attr("data-emails_sent")||0,n=t.siblings("[data-expiration]").attr("data-expiration");i<0?msg("<i class='fal fa-ban'></i> "+a+" å·²é€€è¨‚é€šçŸ¥ä¿¡ï¼Œåˆ¥å†å¯„çµ¦ä»–æƒ¹"):0==i?(alertify.set({labels:{ok:"<i class='fas fa-chevron-right'></i> ä¸‹ä¸€æ­¥ï¼Œè¨­å®š Email",cancel:"å¦"},buttonReverse:!1}),alertify.prompt("<i class='fal fa-envelope'></i> æ”¶ä»¶äºº Emailï¼š<br><small><i class='far fa-shield-alt'></i> åŸºæ–¼å€‹è³‡ä¿è­·ï¼Œæ–¼æ­¤ç™»éŒ„ä¹‹æ°‘çœ¾ Emailï¼Œå°‡åŠ ä»¥ä¿å¯†ï¼Œ<br>åƒ…ç”±è²´åº—çš„æ‚¨ç”¨æ–¼æœ¬æ¬¡é€šçŸ¥ï¼Œä¸æœƒä¹Ÿç„¡æ³•ç§»ä½œå…¶ä»–ç”¨é€”</small>",function(i,r){i&&(r=(r||"").trim(),a==r?email_composer(!0,e,a,n):r.length>5?(email_composer(!0,e,r,n),bd_update({action:"voucher_email",voucher:e,email:r}).then(function(e){switch(e.Status){case 1:return void t.attr({title:r});case 3:msg("<i class='fal fa-times'></i> Email æœ‰èª¤ï¼Œæˆ–æ ¼å¼ä¸æ­£ç¢º"),collect_email(t);break;case 4:msg("<i class='fal fa-ban'></i> "+r+" å·²é€€è¨‚é€šçŸ¥ä¿¡ï¼Œåˆ¥å†å¯„çµ¦ä»–æƒ¹"),collect_email(t);break;default:msg()}email_composer(!1)}).fail(function(){msg(),email_composer(!1)})):(alertify_input_shake(),collect_email("")))},a),alertify_input_custom({type:"email",min:5,max:64,placeholder:"someone@gmail.com"},{"letter-spacing":"1px"})):email_composer(!0,e,a,n)}}function email_composer(t,e,a,i){var n=$(".email"),r=n.find(".variables"),o=$("#Smallchat");if(t){n.removeAttr("data-hidden").fadeTo("fast",1).find("input[type='email']").val(a),r.find("[data-voucher-email]").attr("data-voucher-email",a),r.find("[data-voucher-timer]").attr("data-voucher-timer",i);var l="https://hearty.gift/"+e+"/"+a;r.find("[data-voucher]").attr({href:l,"data-voucher":e,rel:"noopener"}),r.find("[data-voucher-link]").attr({href:l,"data-voucher-link":l,rel:"noopener"}),hj_tinymce_init(),o.fadeOut()}else n.fadeOut(),o.fadeIn();$("body").css({overflow:t?"hidden":"auto"})}function send_voucher_email(){var t=hj_template_field("voucher"),e=hj_template_field("voucher-email"),a=$("[data-emails_sent][title='"+e+"']"),i=parseInt(a.attr("data-emails_sent"))||0;e.length<5||e.indexOf("@")<0?msg("<i class='fal fa-info-circle'></i> Email æ ¼å¼ä¸æ­£ç¢º"):i>4?msg("<i class='fal fa-exclamation-triangle'></i> è¶…å‡ºç™¼ä¿¡ä¸Šé™ (5å°/å–®ä¸€æ”¶ä»¶äºº)ï¼Œè«‹è¯çµ¡æº«åº¦åœ˜éšŠ"):(alertify.set({labels:{ok:"ç¢ºèªå¯„å‡º",cancel:"å–æ¶ˆ"},buttonReverse:!1}),alertify.confirm("<i class='fal fa-eye-slash'></i> å³å°‡ç™¼é€åºè™Ÿé€šçŸ¥ä¿¡åˆ°ã€Œ"+e+"ã€",function(n){if(n){bd_loading(!0);var r=$("<i>",{html:tinymce.activeEditor.getContent({format:"raw"})||""});r.find("[data-voucher]").text(r.find("[data-voucher]").attr("data-voucher")).removeAttr("data-voucher"),r.find("[data-voucher-email]").text(r.find("[data-voucher-email]").attr("data-voucher-email")).removeAttr("data-voucher-email"),r.find("[data-voucher-link]").text(r.find("[data-voucher-link]").attr("data-voucher-link")).removeAttr("data-voucher-link"),r.append($("<hr>").add($("<span>",{text:"æ‚¨åƒåŠ äº†å“ç‰Œæ´»å‹•ï¼Œæ‰æœƒæ”¶åˆ°æ­¤å°é€šçŸ¥("+e+")ã€‚å¦‚ä¸æƒ³å†æ”¶åˆ°ï¼Œè«‹ ",style:"font-size:x-small"})).add($("<a>",{target:"_blank",href:"https://hearty.gift/u/"+e+"/"+t,text:"[å–æ¶ˆè¨‚é–± Unsubscribe :( ]",rel:"noopener",style:"text-decoration:none;font-size:x-small"})).add($("<img>",{src:"https://www.google-analytics.com/collect?v=1&t=event&tid=UA-26998803-8&cid=b0ed2542-fa8f-4054-82c2-924e6b97cf7d&ec=voucher_email&ea=open&dt=voucher_email&cn=voucher_email&cm="+e+"&cs=voucher_email",width:1,height:1}))).find("a[href*='https://']").each(function(){$(this).attr({href:$(this).attr("href").replace(/https:\/\/(?!c.heartymail)/gi,"https://c.heartymail.com/voucher/"+e+"/"+t+"/")})});var o=r.html(),l=$("textarea[name='subject']").val().trim();bd_update({action:"send_voucher_email",voucher:t,email:e,cc_me:+$("input[name='cc_me']").prop("checked"),subject:l,body:o}).then(function(t){switch(t.Status){case 1:msg("<i class='fas fa-check-circle'></i> é€šçŸ¥ä¿¡å·²å¯„è‡³ï¼š"+e+"<br><br><img src='//i.hearty.app/w/hearty.me/bd/images/cute_envelope.gif' style='filter:hue-rotate(145deg)saturate(.9)'>"),tinymce.activeEditor.windowManager.close(),email_composer(!1),a.attr({"data-emails_sent":i+1}),hj_update({action:"gform_post",uri:"1FAIpQLScJfg6TYfg_8NwI5d8yGP6H2Az29K9LA3osLnUcKj9YwUJb6Q",data:$.param({emailAddress:e,"entry.768310548":"[hj_user_id]","entry.2003480077":"[hj_username]","entry.1845355844":l,"entry.2038456161":o,"entry.1240071619":(new Date).toISOString().split("T")[0],"entry.390259802":check_browser()+", "+check_OS()})});break;case 3:msg("<i class='fal fa-info-circle'></i> Email æœ‰èª¤ï¼Œæˆ–æ ¼å¼ä¸æ­£ç¢º");break;default:msg("<i class='fal fa-info-circle'></i> ç³Ÿäº†ï¼Œé†œä¸€ï¼š"+JSON.stringify(t.Values))}bd_loading(!1)}).fail(function(){msg(),bd_loading(!1)})}}),tinymce.activeEditor.execCommand("mcePreview"))}function sender_info(){alertify.set({labels:{ok:"å¥½çš„",cancel:"<i class='fas fa-edit'></i> æˆ‘è¦ä¿®æ”¹"},buttonReverse:!1}),alertify.confirm("<i class='fal fa-mailbox'></i> Email å‰ç¶´ = æº«åº¦ IDï¼›é¡¯ç¤ºåç¨± = æº«åº¦æš±ç¨±",function(t){t||hj_href("account")})}function get_link(t){if(t){var e=t.siblings("[data-voucher]").attr("title")||"",a=t.siblings("[data-email]").attr("title")||null,i="https://hearty.gift/"+e+(null==a?"":"/"+a);alertify.set({labels:{ok:"å¦",cancel:"<i class='fas fa-copy'></i> è¤‡è£½"},buttonReverse:!0}),alertify.prompt("<i class='fal fa-link'></i> å°ˆå±¬é‚€è«‹é€£çµ",function(t){t||(hj_copy($("#alertify .alertify-text")),"share"in navigator&&navigator.share({url:i}).catch(t=>{}))},i),alertify_input_custom({type:"url",placeholder:i,onclick:"hj_copy($(this))"},{cursor:"copy"}),hj_copy_text(i)}}function hj_tinymce_init(){window.tinymce?hj_tinymce_template():(hj_getScript("//cdn.jsdelivr.net/combine/npm/tinymce@5/tinymce.min.min.js,npm/tinymce@5/jquery.tinymce.min.min.js").then(function(){var t=$("textarea[data-editor]");t.val(linkify(t.val())).tinymce({base_url:"https://cdn.jsdelivr.net/npm/tinymce@5",placeholder:"Email ä¿¡ä»¶å…§æ–‡",content_css:"https://cdn.jsdelivr.net/gh/chennien/hearty.me@1.0.39/public/plugins/vouchers.tinymce.min.css",content_css_cors:!0,statusbar:!1,branding:!1,relative_urls:!1,remove_script_host:!1,height:300,menubar:!1,image_caption:!0,save_enablewhendirty:!1,plugins:"autolink preview directionality code visualblocks visualchars fullscreen image link codesample table charmap toc advlist imagetools textpattern noneditable charmap emoticons table paste save",toolbar:"reset-to-default save code preview fullscreen | image table link | undo redo | bold underline alignjustify aligncenter alignright | forecolor backcolor formatselect removeformatk | emoticons | fontsizeselect",toolbar_drawer:"sliding",link_list:[{title:"æº«åº¦æ—¥è¨˜",value:"https://go.hearty.me/hj"}],image_list:[{title:"æº«åº¦æ—¥è¨˜ ä¿¡é ­åœ–ç‰‡",value:"https://i.hearty.app/i/mailheader.png?o=1"},{title:"æº«åº¦æ—¥è¨˜ Logo PNG",value:"https://i.hearty.app/i/logo.png?o=1"},{title:"æº«åº¦æ—¥è¨˜ Logo JPG",value:"https://i.hearty.app/i/logo.jpg?o=1"},{title:"æº«åº¦æ—¥è¨˜ Sheara",value:"https://i.hearty.app/i/illustrations/sheara.jpg?o=1"}],color_map:["ffffff","æ½”ç™½","ffd1a4","è†šè‰²","ffdcdc","æ·¡ç²‰","ffbdbd","æ·ºç²‰","f16d6e","æ·±ç´…","d78b7b","å¡å…¶","d28064","å¡å…¶","b4b4b4","æ·ºç°","444444","æ·±ç°","000000","ç´”é»‘"],contextmenu:"link",language:"zh_TW",language_url:"//cdn.jsdelivr.net/npm/tinymce-all-in-one@4.9.5/langs/zh_TW.min.js",default_link_target:"_blank",link_default_protocol:"https",paste_retain_style_properties:"all",paste_word_valid_elements:"*[*]",paste_convert_word_fake_lists:!1,paste_webkit_styles:"all",paste_merge_formats:!0,paste_data_images:!0,automatic_uploads:!0,images_upload_url:"../api/mail.img.php",images_upload_credentials:!0,save_onsavecallback:hj_tinymce_template_save,setup:function(t){t.on("init",function(){hj_tinymce_template(),bd_update({action:"get_uploaded_images"}).then(function(e){1==e.Status&&(t.settings.image_list=t.settings.image_list.concat(e.Values))})}),t.ui.registry.addButton("reset-to-default",{icon:"restore-draft",tooltip:"é‡ç½®ç‚ºé è¨­æ ¼å¼",onAction:function(){hj_tinymce_template_reset()}})}})}),window.onbeforeunload=function(){return!1})}function hj_tinymce_template(){bd_update({action:"voucher_email_template"}).then(function(t){if(1==t.Status){var e=t.Values;e.subject.length||e.template.length?hj_tinymce_template_rendering(e.subject,e.template):hj_tinymce_template_reset(!0)}})}function hj_tinymce_template_rendering(t,e){var a=hj_template_field("voucher"),i=hj_template_field("voucher-email"),n="https://hearty.gift/"+a+"/"+i,r=hj_template_field("voucher-timer"),o=$("<i>",{html:e});$("textarea[name='subject']").val(t),o.find("[data-voucher]").attr({href:n,"data-voucher":a}),o.find("[data-voucher-link]").attr({href:n,"data-voucher-link":n}),o.find("[data-voucher-email]").attr({"data-voucher-email":i}),o.find("[data-voucher-timer]").replaceWith(hj_timer_dom_convert(r)),o.find("[data-nickname]").text($("header .user").attr("title")||""),o.find("[data-date]").text((new Date).toISOString().split("T")[0].replace(/-/g,"/")),tinymce.activeEditor.setContent(o.html(),{format:"raw"})}function hj_timer_dom_convert(t){return(t=parseInt(t)||0)<Math.floor((new Date).getTime()/1e3)&&(t=0),$("<img>",{src:"https://i.hearty.app/t/"+t,"data-voucher-timer":t,alt:"æœŸé™å€’æ•¸",title:"æœŸé™å€’æ•¸",width:300,height:75}).css({"border-radius":".5px"})}function hj_tinymce_template_reset(t){t?$.ajax({url:"email.template.html?v="+(new Date).toISOString().split("T")[0].replace(/-/g,""),dataType:"text",success:function(t){hj_tinymce_template_rendering("æ‚¨ç¨äº«çš„ã€Œæº«åº¦æ—¥è¨˜ VIP 30æ—¥å…Œæ›åˆ¸ã€",t)}}):(alertify.set({labels:{ok:"å–æ¶ˆ",cancel:"<i class='fas fa-truck-plow'></i> æ¸…æ‰å®ƒ"},buttonReverse:!1}),alertify.confirm("<i class='fal fa-history'></i> è¦æ¸…é™¤å…§å®¹ï¼Œä¸¦å›åˆ°é è¨­æ ¼å¼å—ï¼Ÿ",function(t){t||hj_tinymce_template_reset(!0)}))}function hj_tinymce_template_save(){var t=tinymce.activeEditor.getContent({format:"raw"})||"";bd_update({action:"voucher_email_template",subject:$("textarea[name='subject']").val(),template:t}).then(function(t){1==t.Status&&alertify.success("<i class='fal fa-save'></i> å·²å­˜ç‚ºé è¨­ç¯„æœ¬")})}function hj_template_field(t){return $(".email [data-"+t+"]").attr("data-"+t)}function hj_tinymce_variable(t){tinymce.activeEditor.insertContent(" "+t.prop({contenteditable:!1}).prop("outerHTML")+" ",""),alertify.success("<i class='fal fa-plus'></i> æ’å…¥ "+t.attr("title")||"")}function linkify(t){return(t||"").replace(/\b(?:https?|ftp):\/\/[a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|]/gim,'<a target="_blank" href="$&">$&</a>').replace(/(^|[^\/])(www\.[\S]+(\b|$))/gim,'$1<a target="_blank" href="https://$2">$2</a>')}function hj_export(){var t=$(".vouchers table").clone();t.find("th[title],td[title]").each(function(){$(this).text($(this).attr("title")||"")}),t.find("[data-link]").remove(),exportTableToCSV(t,($("header .user").attr("title")||"æº«åº¦åºè™Ÿ")+"_"+(new Date).toISOString().split("T")[0].replace(/-/g,"")+".csv")}function exportTableToCSV(t,e){var a=t.find("tr:has(th)"),i=t.find("tr:has(td)"),n=String.fromCharCode(11),r=String.fromCharCode(0),o='","',l='"\r\n"',c='"';c+=d(a.map(u)),c+=l,c+=d(i.map(u))+'"';var s="data:application/csv;charset=utf-8,"+encodeURIComponent(c);function d(t){return t.get().join(r).split(r).join(l).split(n).join(o)}function u(t,e){var a=$(e),i=a.find("td");return i.length||(i=a.find("th")),i.map(m).get().join(n)}function m(t,e){return $(e).text().replace('"','""')}$("<a>",{href:s,download:e}).get(0).click()}function bd_kit(){hj_preview(!0,"//docs.google.com/embeddedfolderview?id=0B27GP5aLuObncVg1enJRcFlsSHM#grid")}function bd_contract(){bd_update({action:"bd_contract"}).then(function(t){(t.Values||"").length>0&&hj_preview(!0,"//drive.google.com/file/d/"+t.Values+"/preview")})}function hj_preview(t,e){var a=$("body"),i=$(".hj_preview"),n=i.find("iframe");t?(n.attr({src:e||n.attr("data-url")||"//docs.google.com/document/d/e/2PACX-1vRmTICp7EIOPI_Lis2JTsVtb5tqoz3wulkTZzh2OUJKrzn_97RSpFmK9NtjXFnW4c5fBK374akpK0f8/pub?embedded=true"}).addClass("loading"),i.fadeIn(),a.css({"overflow-y":"hidden","touch-action":"none"})):(i.fadeOut(),a.css({"overflow-y":"auto","touch-action":"auto"}),n.attr({src:""}))}function generate_tutorial(){if("introJs"in window){var t=$(".vouchers");introJs().setOptions({showBullets:!1,prevLabel:"ä¸Šä¸€æ­¥",nextLabel:"ç¹¼çºŒ",doneLabel:"æœ•çŸ¥é“äº†",steps:[{element:t.find("[data-create]").get(0),intro:"ğŸ‘‰ã€€é»ã€Œå–è™Ÿã€ï¼Œç²å¾—åºè™Ÿ",position:"left"},{element:t.find("table").get(0),intro:"ğŸã€€åºè™Ÿæœƒåˆ—æ–¼è¡¨ä¸­",position:"top"},{element:t.find("table th:nth-child(5)").get(0),intro:"âœ‰ï¸ã€€å¯å¯„ç™¼åºè™Ÿ Email",position:"top"},{element:$("#Smallchat iframe").get(0),intro:"ğŸ’¬ã€€å¦‚æœ‰å•é¡Œï¼Œéš¨æ™‚ç§è¨Šæˆ‘å€‘",position:"top"}]}).start().oncomplete(function(){hj_preview(!0)}).onexit(function(){hj_preview(!0)}),setcookie("hearty_voucher_tutorial",1,3)}else hj_getScript_npm("intro.js@3.2.1/intro.min.js",generate_tutorial)}function redeem_tutorial(t){var e=$(".redeem_tutorial"),a={1:"ä¸€ã€æ‰‹å‹•è¼¸å…¥åºè™Ÿ",2:"äºŒã€é»é¸å…Œæ›é€£çµ"};if(t)if(e.length>0)e.fadeIn();else{var i=["//i.hearty.app/b/videos/voucher_redeem",check_OS("iOS")?"#t=0.001":""];$("<section>",{class:"redeem_tutorial",html:Object.keys(a).map(function(t){return $("<div>",{title:a[t],html:$("<video>",{controls:"",muted:"",preload:"",html:$("<source>",{src:i[0]+t+".webm"+i[1],type:"video/webm"}).add($("<source>",{src:i[0]+t+".mp4"+i[1],type:"video/mp4"}))}).on("play",function(){this.requestFullscreen&&this.requestFullscreen()}).on("click",function(t){t.stopPropagation()})})})}).on("click",function(){redeem_tutorial(!1)}).appendTo($("body"))}else e.fadeOut()}$(function(){$(document).on("click",".vouchers [data-copy]",function(){hj_copy_text(this.title)}).on("click",".vouchers td[data-link]",function(){get_link($(this))}).on("click",".vouchers td[data-email]",function(){collect_email($(this))}).on("click",".vouchers td[data-remark]",function(){voucher_remark($(this))}).on("click",".vouchers td[data-hide]",function(){hide_voucher($(this))}),$(".user").on("click",function(){hj_href("account")}),$("header [data-menu]").on("click",function(){nav_toggle($(".menu"),!0)}),$(".email").on("click",function(){confirm("è¦é›¢é–‹ç·¨è¼¯è¦–çª—å—ï¼Ÿ")&&email_composer(!1)}).children("div").on("click",function(t){t.stopPropagation()}).find("input[type='email']").on("click",function(){hj_copy($(this))}),$(".email .variables").on("click",function(t){t.preventDefault()}).find("a").on("click",function(){$(this).is("[data-voucher-timer]")?hj_tinymce_variable(hj_timer_dom_convert($(this).attr("data-voucher-timer")).add($("<br>"))):hj_tinymce_variable($(this))}),$(".email [data-send]").on("click",send_voucher_email),$(".email [data-sender]").on("click",sender_info).find("address").on("click",function(){hj_copy_text(this.innerText)}),$("[data-export]").on("click",hj_export),$("[data-create]").on("click",create_vouchers),$(".contract").on("click",bd_contract),$(".help_btn").on("click",function(){getcookie("hearty_voucher_tutorial")?hj_preview(!0):generate_tutorial()}),$(".hj_preview").on("click",function(){hj_preview(!1)}).find("iframe").on("load",function(){$(this).removeClass("loading")}),$("[data-redeem]").on("click",function(){redeem_tutorial(!0)}),$("[data-kit]").on("click",bd_kit),$("[data-notavailable]").on("click",function(){msg("<i class='fal fa-box-full'></i> åŠŸèƒ½å³å°‡æ¨å‡ºï¼Œå¥½äº†å†è®“ä½ çŸ¥é“")}),get_vouchers(),$(".toast_signin_reminder").delay(5e3).queue(function(){$(this).fadeOut().dequeue()}),hj_getScript_gh({path:"public/plugin.smallchat.min.js",commit:"1.0.39"}),hj_localize_cn()});